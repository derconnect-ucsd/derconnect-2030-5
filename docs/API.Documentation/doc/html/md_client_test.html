<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EPRI 2030.5 Client: Client Test Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EPRI 2030.5 Client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_client_test.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Client Test Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Usage </h2>
<p>The <code>client_test</code> application is a command line tool with the following arguments: </p><pre class="fragment">client_test interface [device certs..] &lt;subtype[:1] | URI&gt; [commands]
</pre><p>The <code>interface</code> argument is the the name of the network interface, running the <code>client_test</code> application with no arguments will list the available network interfaces.</p>
<p>The <code>device</code> argument names the device certificate and private key pair used for TLS, the application will load the certificate <code>device.x509</code> and use the private key file <code>device.pem</code>.</p>
<p>The <code>certs</code> argument is a list of CA certificates or certificate directories to be loaded. If a directory is specified, then all the certificates within the directory are loaded. If no certficates or directories then the certificates from <code>./certs</code> in the local directory are loaded.</p>
<p>The <code>&lt;subtype[:1] | URI&gt;</code> argument delimits the list of certificates and specifies either to perform xmDNS service discovery, or to retrieve the document at the specified URI.</p>
<h2>Subtype DNS-SD queries </h2>
<p>The <code>subtype</code> can be one of:</p>
<ul>
<li><code>bill</code> - to discover Billing servers</li>
<li><code>dr</code> - to discover Demand Response / Load Control servers</li>
<li><code>derp</code> - to discover Distributed Energy Resources servers</li>
<li><code>file</code> - to discover File Download servers</li>
<li><code>msg</code> - to discover Messaging servers</li>
<li><code>ppy</code> - to discover Prepayment servers</li>
<li><code>rsps</code> - to discover Response servers</li>
<li><code>tp</code> - to discover Pricing servers</li>
<li><code>tm</code> - to disocver Time servers</li>
<li><code>upt</code> - to discover Metering servers</li>
<li><code>edev</code> - to discover End Device servers</li>
<li><code>mup</code> - to discover Meter Mirroring servers</li>
<li><code>sdev</code> - to discover Self Device servers</li>
<li><code>smartenergy</code> - to discover IEEE 2030.5 servers of any type</li>
</ul>
<p>When the number <code>1</code> is affixed to the <code>subtype</code>, the <code>client_test</code> sets the <code>QU</code> bit to <code>1</code> in the service discovery request indicating that a unicast response is desired.</p>
<p>Since the <code>subtype</code> argument can delimit the list of certifcates it follows that there can not be a certificate or certificate directory with the same name as the <code>subtype</code> argument.</p>
<p>After the service discovery is performed the <code>client_test</code> application will retreive the DeviceCapability resource at the location given by the <code>dcap</code> key in discovery response.</p>
<h2>URI retrieval </h2>
<p>If a <code>subtype</code> is not specified in the list of arguments, the <code>client_test</code> application attempts to parse a URI. The first argument that matches an absolute form URI (e.g <a href="https:://">https:://</a>[::1]/dcap ) will delimit the list of certificates and attempt to retrieve the URI. The URI scheme specified determines the type of connection used to retreive the resource either <code>http</code> for an unencrypted connection or <code>https</code> for a secure TLS connection. If no port is specified, the default ports for HTTP and HTTPS are used, 80 and 443 respectively.</p>
<h2>Commands </h2>
<p>The last set of arguments are a list of commands to be interpreted. These can be any of the following:</p>
<ul>
<li><code>sfdi SFDI</code> - Use the specified sfdi in performing device registration. This command should be the first command in the list of commands.</li>
<li><code>register</code> - Register the client EndDevice with the server. The <code>client_test</code> application will first check the available EndDevices in the EndDeviceList resource. If an EndDevice with a matching sFDI is not found, the client POSTs an EndDevice instance that contains the sFDI computed from the device certificate. If the POST succeeds or the EndDevice with a matching sFDI was found, the client will retreive the Registration resource linked from the EndDevice instance, the pIN value should be 111115, if not the registration fails. If registritation succeeds and the EndDevice has an associated DER instance, then PUT the device settings to the links provided in the DER instance.</li>
<li><code>primary</code> - Perform all the functions of <code>register</code>, then retreive the FunctionSetAssignmentsList associated with each EndDevice. Determine the FunctionSetAssignments with the highest priority according to the list ordering and retrieve only the DERProgramList associated with that FSA, then retrieve the DERCurveList and DERControlList associated with the highest priority DERProgram in the DERProgramList. Finally schedule the events when retrieval is complete.</li>
<li><code>all</code> - Perform the same functions as <code>primary</code>, except all DERPrograms and the associated DERCurveLists and DERControlLists are retrieved.</li>
<li><code>time</code> - Perform the time test.</li>
<li><code>self</code> - Get the SelfDevice and poll the server LogEventList if present.</li>
<li><code>metering</code> - Perform the mirrored metering test.</li>
<li><code>meter</code> - Perform the inverter meter reading test.</li>
<li><code>alarm</code> - Perfrom the alarms test.</li>
<li><code>device directory</code> - Load the device certificates from the directory and perform the DER Identification Test.</li>
<li><code>poll interval</code> - Set the poll rate for active events in seconds, the default is 300 seconds or 5 minutes.</li>
<li><code>load sfdi directory</code> - Load the device settings located in <code>directory</code> for the EndDevice with the <code>sfdi</code> specified.</li>
</ul>
<h2>Version History </h2>
<h3>Version 0.2.3</h3>
<p>Changes:</p>
<ul>
<li>Event scheduler rewrite, support for program removal and addition, primacy changes and overlapping DER controls.</li>
<li>added commands <code>edev</code>, <code>time</code>, <code>self</code>, <code>metering</code> <code>meter</code>, <code>alarm</code>, <code>device</code></li>
</ul>
<h3>Version 0.2.2</h3>
<p>Changes:</p>
<ul>
<li>New event scheduler, only schedule one future event per EndDevice.</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Divide by zero exception when randomization bound is 0.</li>
<li>remove "level=-S1" from Content-Type in PUT/POST</li>
</ul>
<h3>Version 0.2.1</h3>
<p>Changes:</p>
<ul>
<li>Added <code>sfdi SFDI</code> command to specify the SFDI of the client EndDevice when no certificate is used.</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Safely ignore responses with resources that do not contain an href.</li>
<li>Fixes to the EXI parsing and output based upon more extensive testing.</li>
</ul>
<h3>Version 0.2.0</h3>
<p>Changes:</p>
<ul>
<li>Added responses for IEEE 2030.5 events</li>
<li>Added polling interval for active events</li>
<li>Added polling for event status changes from scheduled to active</li>
<li>Added support to load device settings from a file and PUT to the server</li>
<li>Added device registration sequence</li>
<li>Added <code>primary</code> and <code>all</code> commands and associated retreival patterns.</li>
<li>Added user manual and version information</li>
</ul>
<h3>Version 0.1.0</h3>
<p>Initial version </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
